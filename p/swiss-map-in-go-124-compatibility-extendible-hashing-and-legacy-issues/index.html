<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>

<meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name="baidu-site-verification" content="codeva-3VTxLtnqFP" /><meta name='description' content="Explore the groundbreaking Swiss Map in Go 1.24, which offers over 50% performance improvement and seamless migration from legacy maps. Discover the benefits of Extensible Hashing and its innovative design while addressing challenges like concurrency and memory efficiency. Is it time to adopt Swiss Map for your projects? Read more to find out!">
<title>Swiss Map in Go 1.24: Compatibility, Extendible Hashing, and Legacy Issues</title>

<link rel='canonical' href='https://huizhou92.com/p/swiss-map-in-go-124-compatibility-extendible-hashing-and-legacy-issues/'>

<link rel="stylesheet" href="/scss/style.min.7a8650e463f7bf12cc86f69675ab60349b39aa794883f0c4ba0547d9e71cd5b5.css"><meta property='og:title' content="Swiss Map in Go 1.24: Compatibility, Extendible Hashing, and Legacy Issues">
<meta property='og:description' content="Explore the groundbreaking Swiss Map in Go 1.24, which offers over 50% performance improvement and seamless migration from legacy maps. Discover the benefits of Extensible Hashing and its innovative design while addressing challenges like concurrency and memory efficiency. Is it time to adopt Swiss Map for your projects? Read more to find out!">
<meta property='og:url' content='https://huizhou92.com/p/swiss-map-in-go-124-compatibility-extendible-hashing-and-legacy-issues/'>
<meta property='og:site_name' content='huizhou92&#39;s Blog'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='SwissTable' /><meta property='article:tag' content='golang' /><meta property='article:tag' content='go' /><meta property='article:published_time' content='2025-01-23T14:34:27&#43;08:00'/><meta property='article:modified_time' content='2025-01-23T14:34:24&#43;08:00'/>
<meta name="twitter:site" content="@piaopiaopig">
    <meta name="twitter:creator" content="@piaopiaopig"><meta name="twitter:title" content="Swiss Map in Go 1.24: Compatibility, Extendible Hashing, and Legacy Issues">
<meta name="twitter:description" content="Explore the groundbreaking Swiss Map in Go 1.24, which offers over 50% performance improvement and seamless migration from legacy maps. Discover the benefits of Extensible Hashing and its innovative design while addressing challenges like concurrency and memory efficiency. Is it time to adopt Swiss Map for your projects? Read more to find out!">
    <link rel="shortcut icon" href="/favicon.png" />

  
    
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-JMPMQ2QREG"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-JMPMQ2QREG');
        }
      </script>
    
  

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9000447749076746"
crossorigin="anonymous"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <meta name="referrer" content="no-referrer-when-downgrade">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9000447749076746"
     crossorigin="anonymous"></script>

<script defer src="https://cloud.umami.is/script.js" data-website-id="e4ee8ffe-fb88-4635-9953-715598461baa"></script>
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu82a0a27be0be6253ef292d06d582a6ab_94926_300x0_resize_q75_box.jpeg" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">huizhou92&#39;s Blog</a></h1>
            <h2 class="site-description">Backend Engineer With A Focus On Golang, Cloud Computing, Data Storage And Efficiency Tools. Lifelong Learner.</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://github.com/hxzhouh'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://x.com/piaopiaopig'
                        target="_blank"
                        title="Twitter"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        
        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>About</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>Links</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">
                    
                        <li id="i18n-switch">  
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>



                            <select name="language" title="language" onchange="window.location.href = this.selectedOptions[0].value">
                                
                                    <option value="https://huizhou92.com/" selected>English</option>
                                
                                    <option value="https://huizhou92.com/zh-cn/" >中文</option>
                                
                            </select>
                        </li>
                    
                

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>Dark Mode</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>


<ins class="adsbygoogle"
   style="display:block"
   data-ad-client="ca-pub-9000447749076746"
   data-ad-slot="5063552270"
   data-ad-format="auto"
   data-full-width-responsive="true"></ins>
<script>
   (adsbygoogle = window.adsbygoogle || []).push({});
</script>


    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li>
      <ol>
        <li><a href="#compatibility-seamless-migration-support">Compatibility: Seamless Migration Support</a></li>
        <li><a href="#swiss-maps-data-structure">Swiss Map&rsquo;s Data Structure</a></li>
        <li><a href="#extendible-hashing-efficient-incremental-scaling">Extendible Hashing: Efficient Incremental Scaling</a>
          <ol>
            <li><a href="#directory-and-table-hierarchy">Directory and Table Hierarchy</a></li>
            <li><a href="#split-operation">Split Operation</a></li>
            <li><a href="#data-redistribution-hash-masking">Data Redistribution: Hash Masking</a></li>
            <li><a href="#directory-expansion">Directory Expansion</a></li>
            <li><a href="#key-advantages">Key Advantages</a></li>
          </ol>
        </li>
        <li><a href="#additional-optimizations">Additional Optimizations</a></li>
        <li><a href="#remaining-challenges">Remaining Challenges</a>
          <ol>
            <li><a href="#concurrency-limitations">Concurrency Limitations</a></li>
            <li><a href="#memory-fragmentation">Memory Fragmentation</a></li>
            <li><a href="#iterator-complexity">Iterator Complexity</a></li>
          </ol>
        </li>
        <li><a href="#performance-testing">Performance Testing</a></li>
        <li><a href="#conclusion">Conclusion</a></li>
        <li><a href="#references">References</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>


<ins class="adsbygoogle"
   style="display:block"
   data-ad-client="ca-pub-9000447749076746"
   data-ad-slot="5063552270"
   data-ad-format="auto"
   data-full-width-responsive="true"></ins>
<script>
   (adsbygoogle = window.adsbygoogle || []).push({});
</script>
            
        
    </aside>


<ins class="adsbygoogle"
   style="display:block"
   data-ad-client="ca-pub-9000447749076746"
   data-ad-slot="5063552270"
   data-ad-format="auto"
   data-full-width-responsive="true"></ins>
<script>
   (adsbygoogle = window.adsbygoogle || []).push({});
</script>

            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/tech/" style="background-color: #2a9d8f; color: #ffff;">
                tech
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/swiss-map-in-go-124-compatibility-extendible-hashing-and-legacy-issues/">Swiss Map in Go 1.24: Compatibility, Extendible Hashing, and Legacy Issues</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            Explore the groundbreaking Swiss Map in Go 1.24, which offers over 50% performance improvement and seamless migration from legacy maps. Discover the benefits of Extensible Hashing and its innovative design while addressing challenges like concurrency and memory efficiency. Is it time to adopt Swiss Map for your projects? Read more to find out!
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Jan 23, 2025</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    5 minute read
                </time>
            </div>
        
         
        <div class="article-analysic">&nbsp
    
            <?xml version="1.0" encoding="utf-8"?>

<!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
<svg fill="#000000" width="800px" height="800px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  
  <g id="read">
    <g>
      <path  d="M12,18.883a10.8,10.8,0,0,1-9.675-5.728,2.6,2.6,0,0,1,0-2.31A10.8,10.8,0,0,1,12,5.117a10.8,10.8,0,0,1,9.675,5.728h0a2.6,2.6,0,0,1,0,2.31A10.8,10.8,0,0,1,12,18.883ZM12,6.117a9.787,9.787,0,0,0-8.78,5.176,1.586,1.586,0,0,0,0,1.415A9.788,9.788,0,0,0,12,17.883a9.787,9.787,0,0,0,8.78-5.176,1.584,1.584,0,0,0,0-1.414h0A9.787,9.787,0,0,0,12,6.117Z"/>
      <path  d="M12,16.049A4.049,4.049,0,1,1,16.049,12,4.054,4.054,0,0,1,12,16.049Zm0-7.1A3.049,3.049,0,1,0,15.049,12,3.052,3.052,0,0,0,12,8.951Z"/>
      <circle  cx="12" cy="12" r="2.028"/>
    </g>
  </g>
</svg>
            <time class="article-words">
                <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv"></span> &nbspReads</span>
            </time>
        </div>
    </footer>
    

    
        <footer class="article-translations">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>



            <div>
                
                    <a href="https://huizhou92.com/zh-cn/p/go-124-%E7%9A%84-swiss-map%E5%85%BC%E5%AE%B9%E6%80%A7%E6%89%A9%E5%B1%95%E5%93%88%E5%B8%8C%E4%B8%8E%E9%81%97%E7%95%99%E9%97%AE%E9%A2%98/" class="link">中文</a>
                
            </div>
        </footer>
    
</div>

</header>

    <section class="article-content">
    
    
    <p>In the <a class="link" href="https://pub.huizhou92.com/swisstable-a-high-performance-hash-table-implementation-3e13bfe8c79b"  target="_blank" rel="noopener"
    >previous article</a>, I introduced <code>swiss map</code> and a Go implementation by Dolthub. Readers unfamiliar with <code>swiss map</code> should review that piece first.</p>
<p>With the upcoming release of Go 1.24, <code>swiss map</code> will replace the existing <code>map</code> implementation in the Go standard library. It maintains full API compatibility while delivering over 50% performance improvements in specific benchmark scenarios.<br>
Currently, <code>swiss map</code> is my most anticipated feature in Go 1.24. But does it truly live up to the hype? This article analyzes its core design through three lenses: <strong>compatibility</strong>, <strong>Extensible Hashing implementation</strong>, and <strong>remaining challenges</strong>.</p>
<!-- more-->
<h3 id="compatibility-seamless-migration-support">Compatibility: Seamless Migration Support
</h3><p>One of <code>swiss map</code>&rsquo;s key design goals is backward compatibility with Go&rsquo;s legacy <code>map</code>. Conditional compilation flags and type conversions enable zero-code migration. For example, in <code>export_swiss_test.go</code>, the <code>newTestMapType</code> function directly converts legacy <code>map</code> metadata into <code>swiss map</code>&rsquo;s type structure:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// https://github.com/golang/go/blob/3f4164f508b8148eb526fc096884dba2609f5835/src/internal/runtime/maps/export_swiss_test.go#L14
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nx">newTestMapType</span><span class="p">[</span><span class="nx">K</span> <span class="nx">comparable</span><span class="p">,</span> <span class="nx">V</span> <span class="nx">any</span><span class="p">]()</span> <span class="o">*</span><span class="nx">abi</span><span class="p">.</span><span class="nx">SwissMapType</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">m</span> <span class="kd">map</span><span class="p">[</span><span class="nx">K</span><span class="p">]</span><span class="nx">V</span>
</span></span><span class="line"><span class="cl">    <span class="nx">mTyp</span> <span class="o">:=</span> <span class="nx">abi</span><span class="p">.</span><span class="nf">TypeOf</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">mt</span> <span class="o">:=</span> <span class="p">(</span><span class="o">*</span><span class="nx">abi</span><span class="p">.</span><span class="nx">SwissMapType</span><span class="p">)(</span><span class="nx">unsafe</span><span class="p">.</span><span class="nf">Pointer</span><span class="p">(</span><span class="nx">mTyp</span><span class="p">))</span> <span class="c1">// Direct type conversion
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="nx">mt</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>This design allows existing code to enable <code>swiss map</code> via the experimental flag <code>GOEXPERIMENT=swissmap</code> (now enabled by default in gotip builds like <code>go1.24-3f4164f5</code>).<br>
To revert to the legacy map implementation, use <code>GOEXPERIMENT=noswissmap</code>.</p>
<h3 id="swiss-maps-data-structure">Swiss Map&rsquo;s Data Structure
</h3><p><img src="https://images.hxzhouh.com/blog-images/2025/01/784e3f6a0ff90601480a2da80f3cb9d0.png"
	
	
	
	loading="lazy"
	
	
></p>
<h3 id="extendible-hashing-efficient-incremental-scaling">Extendible Hashing: Efficient Incremental Scaling
</h3><p>Beyond compatibility improvements, <code>swiss map</code> introduces <strong>Extensible Hashing</strong> to enable efficient incremental scaling. Unlike traditional hash tables, which require complete data migration during resizing, Extensible Hashing distributes scaling costs across multiple operations using multi-level directories and table splitting.</p>
<h4 id="directory-and-table-hierarchy">Directory and Table Hierarchy
</h4><p>The <code>Map</code> struct in <code>map.go</code> uses <code>globalDepth</code> and <code>directory</code> to manage hierarchy:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// https://github.com/golang/go/blob/3f4164f508b8148eb526fc096884dba2609f5835/src/internal/runtime/maps/map.go#L194
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Map</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">globalDepth</span>  <span class="kt">uint8</span>       <span class="c1">// Global depth of directory
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">dirPtr</span>       <span class="nx">unsafe</span><span class="p">.</span><span class="nx">Pointer</span> <span class="c1">// Pointer to directory (array of tables)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>The directory size is <code>1 &lt;&lt; globalDepth</code>, with each entry pointing to a <code>table</code>. When a table reaches its capacity (<code>maxTableCapacity</code>, default 1024), it triggers a <strong>split</strong> instead of global resizing.</p>
<h4 id="split-operation">Split Operation
</h4><p>A split creates two child tables (<code>left</code> and <code>right</code>) with increased <code>localDepth</code>, redistributing data based on hash bits:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// https://github.com/golang/go/blob/3f4164f508b8148eb526fc096884dba2609f5835/src/internal/runtime/maps/table.go#L1043
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">table</span><span class="p">)</span> <span class="nf">split</span><span class="p">(</span><span class="nx">typ</span> <span class="o">*</span><span class="nx">abi</span><span class="p">.</span><span class="nx">SwissMapType</span><span class="p">,</span> <span class="nx">m</span> <span class="o">*</span><span class="nx">Map</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">localDepth</span> <span class="o">:=</span> <span class="nx">t</span><span class="p">.</span><span class="nx">localDepth</span>
</span></span><span class="line"><span class="cl">    <span class="nx">localDepth</span><span class="o">++</span> <span class="c1">// Child tables have +1 local depth
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">left</span> <span class="o">:=</span> <span class="nf">newTable</span><span class="p">(</span><span class="nx">typ</span><span class="p">,</span> <span class="nx">maxTableCapacity</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">localDepth</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">right</span> <span class="o">:=</span> <span class="nf">newTable</span><span class="p">(</span><span class="nx">typ</span><span class="p">,</span> <span class="nx">maxTableCapacity</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">localDepth</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>New tables allocate contiguous memory blocks via <code>newarray</code>, preserving cache locality.</p>
<h4 id="data-redistribution-hash-masking">Data Redistribution: Hash Masking
</h4><p>During splits, hash values&rsquo; high-order bits (determined by <code>localDepth</code>) dictate data placement:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// https://github.com/golang/go/blob/3f4164f508b8148eb526fc096884dba2609f5835/src/internal/runtime/maps/table.go#L1052
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">mask</span> <span class="o">:=</span> <span class="nf">localDepthMask</span><span class="p">(</span><span class="nx">localDepth</span><span class="p">)</span> <span class="c1">// e.g., 0x80000000 (32-bit)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">for</span> <span class="o">...</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">hash</span> <span class="o">:=</span> <span class="nx">typ</span><span class="p">.</span><span class="nf">Hasher</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">m</span><span class="p">.</span><span class="nx">seed</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">hash</span> <span class="o">&amp;</span> <span class="nx">mask</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">left</span><span class="p">.</span><span class="nf">uncheckedPutSlot</span><span class="p">(</span><span class="o">...</span><span class="p">)</span> <span class="c1">// Assign to left table
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">right</span><span class="p">.</span><span class="nf">uncheckedPutSlot</span><span class="p">(</span><span class="o">...</span><span class="p">)</span> <span class="c1">// Assign to right table
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>Mask Calculation</strong>: <code>localDepthMask</code> generates masks like:
<ul>
<li><code>localDepth=1</code> → <code>0x80000000</code> (32-bit) or <code>0x8000000000000000</code> (64-bit)</li>
</ul>
</li>
</ul>
<h4 id="directory-expansion">Directory Expansion
</h4><p>When a split occurs at the global depth, the directory doubles in size:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// map.go
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">Map</span><span class="p">)</span> <span class="nf">installTableSplit</span><span class="p">(</span><span class="nx">old</span><span class="p">,</span> <span class="nx">left</span><span class="p">,</span> <span class="nx">right</span> <span class="o">*</span><span class="nx">table</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">old</span><span class="p">.</span><span class="nx">localDepth</span> <span class="o">==</span> <span class="nx">m</span><span class="p">.</span><span class="nx">globalDepth</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">newDir</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="o">*</span><span class="nx">table</span><span class="p">,</span> <span class="nx">m</span><span class="p">.</span><span class="nx">dirLen</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span> <span class="c1">// Double directory size
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="c1">// Update directory entries...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">m</span><span class="p">.</span><span class="nx">globalDepth</span><span class="o">++</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Example: Directory Expansion</strong><br>
Initial state (<code>globalDepth=1</code>):</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-golang" data-lang="golang"><span class="line"><span class="cl"><span class="nx">directory</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="err">→</span> <span class="nx">Table</span> <span class="nf">A</span> <span class="p">(</span><span class="nx">localDepth</span><span class="p">=</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">directory</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="err">→</span> <span class="nx">Table</span> <span class="nf">A</span> <span class="p">(</span><span class="nx">localDepth</span><span class="p">=</span><span class="mi">1</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>After split (<code>globalDepth=2</code>):</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-golang" data-lang="golang"><span class="line"><span class="cl"><span class="nx">directory</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="err">→</span> <span class="nf">Left</span>  <span class="p">(</span><span class="nx">hash</span> <span class="nx">prefix</span> <span class="mo">00</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">directory</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="err">→</span> <span class="nf">Left</span>  <span class="p">(</span><span class="nx">hash</span> <span class="nx">prefix</span> <span class="mo">01</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">directory</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="err">→</span> <span class="nf">Right</span> <span class="p">(</span><span class="nx">hash</span> <span class="nx">prefix</span> <span class="mi">10</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">directory</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="err">→</span> <span class="nf">Right</span> <span class="p">(</span><span class="nx">hash</span> <span class="nx">prefix</span> <span class="mi">11</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="key-advantages">Key Advantages
</h4><ol>
<li><strong>Locality</strong>: Only overloaded tables split</li>
<li><strong>Incremental Scaling</strong>: Directory grows on demand</li>
<li><strong>Cache Efficiency</strong>: Continuous memory allocation for table groups</li>
</ol>
<h3 id="additional-optimizations">Additional Optimizations
</h3><p><code>swiss map</code> optimizes small-element scenarios (≤8 elements) using a single group, minimizing performance penalties for small datasets.</p>
<h3 id="remaining-challenges">Remaining Challenges
</h3><p>Despite significant improvements, several issues remain:</p>
<h4 id="concurrency-limitations">Concurrency Limitations
</h4><p>The current implementation uses a simple <code>writing</code> flag for concurrent write detection:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// https://github.com/golang/go/blob/3f4164f508b8148eb526fc096884dba2609f5835/src/internal/runtime/maps/map.go#L478
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">Map</span><span class="p">)</span> <span class="nf">PutSlot</span><span class="p">(</span><span class="nx">typ</span> <span class="o">*</span><span class="nx">abi</span><span class="p">.</span><span class="nx">SwissMapType</span><span class="p">,</span> <span class="nx">key</span> <span class="nx">unsafe</span><span class="p">.</span><span class="nx">Pointer</span><span class="p">)</span> <span class="nx">unsafe</span><span class="p">.</span><span class="nx">Pointer</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">m</span><span class="p">.</span><span class="nx">writing</span> <span class="p">^=</span> <span class="mi">1</span> <span class="c1">// Non-atomic flag
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>This may cause race conditions in high-concurrency scenarios. Future versions may introduce finer-grained locking.</p>
<h4 id="memory-fragmentation">Memory Fragmentation
</h4><p>The <code>group</code> structure (8 control bytes + 8 key-value slots) may waste memory for small types. For example, <code>int32</code> keys with <code>int8</code> values leave 3 bytes unused per slot.</p>
<h4 id="iterator-complexity">Iterator Complexity
</h4><p>The <code>Iter</code> implementation handles directory expansion and table splits, adding complexity:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// https://github.com/golang/go/blob/3f4164f508b8148eb526fc096884dba2609f5835/src/internal/runtime/maps/table.go#L742
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">it</span> <span class="o">*</span><span class="nx">Iter</span><span class="p">)</span> <span class="nf">Next</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nx">it</span><span class="p">.</span><span class="nx">globalDepth</span> <span class="o">!=</span> <span class="nx">it</span><span class="p">.</span><span class="nx">m</span><span class="p">.</span><span class="nx">globalDepth</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Handle directory expansion
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">it</span><span class="p">.</span><span class="nx">dirIdx</span> <span class="o">&lt;&lt;=</span> <span class="p">(</span><span class="nx">it</span><span class="p">.</span><span class="nx">m</span><span class="p">.</span><span class="nx">globalDepth</span> <span class="o">-</span> <span class="nx">it</span><span class="p">.</span><span class="nx">globalDepth</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Frequent resizing may impact iterator performance.</p>
<p>Additionally, numerous TODOs remain in the latest codebase (see the image below), and questions about their resolution remain unresolved before Go 1.24&rsquo;s release.<br>
<img src="https://images.hxzhouh.com/blog-images/2025/01/715d866b7013c977454d49537e01888b.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>Community discussions highlight performance variability, with some reports of regressions.<br>
<a class="link" href="https://x.com/valyala/status/1879988053076504761"  target="_blank" rel="noopener"
    >https://x.com/valyala/status/1879988053076504761</a></p>
<h3 id="performance-testing">Performance Testing
</h3><p>Test code: <a class="link" href="https://github.com/hxzhouh/gomapbench"  target="_blank" rel="noopener"
    >github.com/hxzhouh/gomapbench</a><br>
Environment: <code>go version devel go1.24-3f4164f5 Mon Jan 20 09:25:11 2025 -0800 darwin/arm64</code></p>
<p><img src="https://images.hxzhouh.com/blog-images/2025/01/f4a1ee763ddd58e309055e616b562268.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>Average performance improvements hover around 20%, with some scenarios showing up to 50% gains. However, these results are machine-specific, and some users report performance regressions. The final evaluation awaits further optimization.</p>
<h3 id="conclusion">Conclusion
</h3><p>Go 1.24&rsquo;s <code>swiss map</code> delivers significant performance gains through compatibility design, Extendible Hashing, and optimized probing sequences. However, challenges remain in concurrency handling and memory efficiency. Developers should consider adopting it in performance-critical contexts while monitoring its evolving implementation.</p>
<h3 id="references">References
</h3><ul>
<li><a class="link" href="https://tonybai.com/2024/11/14/go-map-use-swiss-table/"  target="_blank" rel="noopener"
    >Tony Bai&rsquo;s Analysis</a></li>
<li><a class="link" href="https://github.com/golang/go/issues/54766"  target="_blank" rel="noopener"
    >GitHub Issue #54766</a></li>
<li><a class="link" href="https://www.geeksforgeeks.org/extendible-hashing-dynamic-approach-to-dbms/"  target="_blank" rel="noopener"
    >Extendible Hashing Explained</a></li>
<li><a class="link" href="https://pub.huizhou92.com/swisstable-a-high-performance-hash-table-implementation-3e13bfe8c79b"  target="_blank" rel="noopener"
    >Original Implementation Article</a></li>
</ul>
<hr>
<ul>
<li><a class="link" href="https://huizhou92.com/p/swiss-map-in-go-124-compatibility-extendible-hashing-and-legacy-issues/"  target="_blank" rel="noopener"
    >Long Time Link</a></li>
<li>If you find my blog helpful, please subscribe to me via <a class="link" href="https://huizhou92.com/index.xml"  target="_blank" rel="noopener"
    >RSS</a></li>
<li>Or follow me on <a class="link" href="https://x.com/@piaopiaopig"  target="_blank" rel="noopener"
    >X</a></li>
<li>If you have a <a class="link" href="https://medium.huizhou92.com/"  target="_blank" rel="noopener"
    >Medium</a> account, follow me there. My articles will be published there as soon as possible.</li>
</ul>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/swisstable/">SwissTable</a>
        
            <a href="/tags/golang/">Golang</a>
        
            <a href="/tags/go/">Go</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    <section class="article-lastmod">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



        <span>
            Last updated on Jan 23, 2025 14:34 CST
        </span>
    </section></footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI&#43;WdtXRGWt2kTvGFasHpSy3SV"crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG&#43;vnGctmUb0ZY0l8"crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"integrity="sha384-&#43;VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4&#43;/RRE05"crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.body, {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ],
            ignoredClasses: ["gist"]
        });})
</script>
    
</article>

    

    

<ins class="adsbygoogle"
   style="display:block"
   data-ad-client="ca-pub-9000447749076746"
   data-ad-slot="5063552270"
   data-ad-format="auto"
   data-full-width-responsive="true"></ins>
<script>
   (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<aside class="related-content--wrapper">
    <h2 class="section-title">Related content</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/p/go-high-performance-programming-ep10-two-useful-golang-lock-free-programming-tips/">
        
        

        <div class="article-details">
            <h2 class="article-title">Go High-Performance Programming EP10: Two Useful Golang Lock-Free Programming Tips</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/go-high-performance-programming-ep9-escape-analysis/">
        
        
            <div class="article-image">
                
                    <img src="https://images.hxzhouh.com/blog-images/2024/08/317a5c9d3df72bec002eb7c0bd64c06d.png" loading="lazy" data-key="" data-hash="https://images.hxzhouh.com/blog-images/2024/08/317a5c9d3df72bec002eb7c0bd64c06d.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Go High-Performance Programming EP9: Escape Analysis</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/unmasking-go-memory-leaks-cloudwego-open-sources-goref-for-deep-heap-analysis/">
        
        
            <div class="article-image">
                
                    <img src="https://images.hxzhouh.com/blog-images/2025/02/f1e888e98523470202649a4a1fe3d769.png" loading="lazy" data-key="unmasking-go-memory-leaks-cloudwego-open-sources-goref-for-deep-heap-analysis" data-hash="https://images.hxzhouh.com/blog-images/2025/02/f1e888e98523470202649a4a1fe3d769.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Unmasking Go Memory Leaks: CloudWeGo Open Sources goref for Deep Heap Analysis</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/go124-in-addition-to-the-standard-library-you-should-probably-pay-more-attention-to-changes-in-go-tools/">
        
        

        <div class="article-details">
            <h2 class="article-title">Go1.24: In addition to the standard library, you should probably pay more attention to changes in Go tools</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/use-request-hedging-to-reduce-long-tail-requests/">
        
        

        <div class="article-details">
            <h2 class="article-title">Use Request Hedging To Reduce Long-Tail Requests</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>


    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2023 - 
        
        2025 Copyright © 2023 huizhou92
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.26.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
    <script src="/js/adblock-detection.js" defer></script>
     
	
	<div class="busuanzi-footer">
	<span id="busuanzi_container_site_pv">
		Total site visits: <span id="busuanzi_value_site_pv"></span>
	</span>
	<span id="busuanzi_container_site_uv">
		Total Visitors: <span id="busuanzi_value_site_uv"></span>
	</span>
	</div></footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
