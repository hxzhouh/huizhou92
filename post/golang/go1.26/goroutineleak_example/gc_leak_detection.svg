<svg xmlns="http://www.w3.org/2000/svg" width="900" height="600" viewBox="0 0 900 600">
    <title>GC Goroutine Leak Detection</title>

    <!-- Background -->
    <rect width="900" height="600" fill="#f5f5f5"/>

    <!-- Header -->
    <text x="450" y="50" font-size="24" font-weight="bold" fill="#333" text-anchor="middle">GC Goroutine Leak Detection</text>

    <!-- Step 1: GC Marking -->
    <rect x="50" y="100" width="250" height="150" rx="10" fill="#ffffff" stroke="#4caf50" stroke-width="2"/>
    <text x="175" y="130" font-size="18" font-weight="bold" fill="#4caf50" text-anchor="middle">Step 1: GC Marking</text>
    <text x="175" y="160" font-size="12" fill="#333" text-anchor="middle">Mark all reachable objects</text>
    <text x="175" y="180" font-size="12" fill="#333" text-anchor="middle">Goroutines and their stacks</text>
    <text x="175" y="200" font-size="12" fill="#333" text-anchor="middle">Synchronization primitives</text>

    <!-- Step 2: Set Sync Objects Untraceable -->
    <rect x="350" y="100" width="250" height="150" rx="10" fill="#ffffff" stroke="#ff9800" stroke-width="2"/>
    <text x="475" y="130" font-size="18" font-weight="bold" fill="#ff9800" text-anchor="middle">Step 2: Sync Objects Untraceable</text>
    <text x="475" y="160" font-size="12" fill="#333" text-anchor="middle">Make sync objects untraceable</text>
    <text x="475" y="180" font-size="12" fill="#333" text-anchor="middle">Prevent false marking of leaked objects</text>

    <!-- Step 3: Find Leaked Goroutines -->
    <rect x="650" y="100" width="250" height="150" rx="10" fill="#ffffff" stroke="#f44336" stroke-width="2"/>
    <text x="775" y="130" font-size="18" font-weight="bold" fill="#f44336" text-anchor="middle">Step 3: Find Leaked Goroutines</text>
    <text x="775" y="160" font-size="12" fill="#333" text-anchor="middle">Identify goroutines blocked on</text>
    <text x="775" y="180" font-size="12" fill="#333" text-anchor="middle">unreachable sync primitives</text>

    <!-- Step 4: Mark as Leaked -->
    <rect x="150" y="300" width="250" height="150" rx="10" fill="#ffffff" stroke="#9c27b0" stroke-width="2"/>
    <text x="275" y="330" font-size="18" font-weight="bold" fill="#9c27b0" text-anchor="middle">Step 4: Mark as Leaked</text>
    <text x="275" y="360" font-size="12" fill="#333" text-anchor="middle">Set goroutine status to _Gleaked</text>
    <text x="275" y="380" font-size="12" fill="#333" text-anchor="middle">Update internal leak count</text>

    <!-- Step 5: Restore Sync Objects -->
    <rect x="500" y="300" width="250" height="150" rx="10" fill="#ffffff" stroke="#2196f3" stroke-width="2"/>
    <text x="625" y="330" font-size="18" font-weight="bold" fill="#2196f3" text-anchor="middle">Step 5: Restore Sync Objects</text>
    <text x="625" y="360" font-size="12" fill="#333" text-anchor="middle">Make sync objects traceable again</text>
    <text x="625" y="380" font-size="12" fill="#333" text-anchor="middle">Prepare for next GC cycle</text>

    <!-- Arrows -->
    <line x1="305" y1="175" x2="345" y2="175" stroke="#333" stroke-width="2"/>
    <polygon points="345,170 350,175 345,180" fill="#333"/>

    <line x1="605" y1="175" x2="645" y2="175" stroke="#333" stroke-width="2"/>
    <polygon points="645,170 650,175 645,180" fill="#333"/>

    <line x1="775" y1="255" x2="775" y2="295" stroke="#333" stroke-width="2"/>
    <polygon points="770,295 775,300 780,295" fill="#333"/>

    <line x1="405" y1="455" x2="495" y2="455" stroke="#333" stroke-width="2"/>
    <polygon points="495,450 500,455 495,460" fill="#333"/>

    <!-- Legend -->
    <rect x="50" y="500" width="800" height="60" rx="10" fill="#ffffff" stroke="#333" stroke-width="2"/>
    <text x="80" y="535" font-size="14" font-weight="bold" fill="#333">Legend:</text>
    <rect x="160" y="515" width="12" height="12" fill="#4caf50"/>
    <text x="180" y="528" font-size="12" fill="#333">GC Marking</text>
    <rect x="280" y="515" width="12" height="12" fill="#ff9800"/>
    <text x="300" y="528" font-size="12" fill="#333">Sync Objects Untraceable</text>
    <rect x="480" y="515" width="12" height="12" fill="#f44336"/>
    <text x="500" y="528" font-size="12" fill="#333">Find Leaked Goroutines</text>
    <rect x="700" y="515" width="12" height="12" fill="#9c27b0"/>
    <text x="720" y="528" font-size="12" fill="#333">Mark as Leaked</text>
</svg>